#!/bin/sh
# commit-msg hook
#
# Checks the commit message for style.
# 1. Subject line should be 50 characters or less.
# 2. Subject line should contain Korean.

COMMIT_MSG_FILE=$1
SUBJECT=$(head -n1 "$COMMIT_MSG_FILE")
# Use 'expr length' for better compatibility
SUBJECT_LENGTH=$(expr length "$SUBJECT")

echo "--- Running commit-msg hook ---"

# Check length
if [ "$SUBJECT_LENGTH" -gt 50 ]; then
    echo "[오류] 커밋 제목이 50자를 초과했습니다 (${SUBJECT_LENGTH}자)."
    exit 1
fi

# Check for Korean characters (simple check)
if ! echo "$SUBJECT" | grep -q -E '[가-힣]'; then
    echo "[경고] 커밋 제목에 한글이 없습니다. 한글 사용을 권장합니다."
fi

echo "--- Commit-msg hook finished ---"
exit 0